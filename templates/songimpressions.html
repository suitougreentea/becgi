{% extends "template.html" %}
{% block style %} "display: inline-block; width: 100%" {% endblock %}
{% block content %}

<center>

{% with messages = get_flashed_messages() %}
  {% if messages %}

    <div class="text-danger bg-danger">
    {% for message in messages %}
      {{ message }}
    {% endfor %}
  </div>
  {% endif %}
{% endwith %}

    <h1 class=".subt">Song Information </span></h1>
    <h2> {{song.name}} </h2>
    <h3> <span class="subt">by</span> {{song.author}} </h3>
    <hr/>
    <div class="container">
      <div class="container-fluid">
        <h3> Description </h4>
        <p>{{song.description}}</p>
        <a href="{{song.link}}"><h4> Download </h4></a>
      </div>
    </div>
  <br/> <br/>
    <hr/>

  <h3>Impressions</h4>
{% if impression_count == 0 %}
    <center>Nothing to show.</center>
{% else %}
    <h4><span style="color:darkgrey">Total Impressions: </span>{{impression_count}}</h4>
    <h4><span style="color:darkgrey">Total Score: </span><b>{{rating}}</b></h4><br/>

    <table class="table impression-table">
        <tr>
            <td>
                <b>Name</b>
            </td>
            <td>
                <b>Rating</b>
            </td>
            <td>
                <b>Comment</b>
            </td>
        </tr>
{% for impression in impressions %}

        <tr>
            <td>{{impression.author}}</td>
            <td>{{impression.rating}}</td>
            <td>{{impression.comment}}</td>
        </tr>
{% endfor %}

    </table>
{% endif %}

  <h3> Leave your own! </h3>
    <form action="submit/{{song.id}}" method="post">
  {{form.csrf_token}}

        <table class="table submit-table" style="">
            <tr>
                <td>{{form.author.label}}</td>
                <td>{{form.author}}</td>
            </tr>
            <tr>
                <td>{{form.rating.label}}</td>
                <td>{{form.rating}}</td>
            </tr>
            <tr>
                <td>{{form.comment.label}}</td>
                <td>{{form.comment}}</td>
            </tr>
            <tr>
                <td>Captcha</td>
                <td>{{form.captcha}}</td>
            </tr>
        </table>
        <input type="submit" value="Submit impression"/>
    </form>

</center>
{% endblock %}
